!function(t){window.priorityNav=t()}(function(){"use strict";function t(t){var e=document.querySelectorAll(t.nav),n=gn.isNodeList(e)?e:[e];if(0===e.length)return void console.log('"'+t.nav+"\" can't be found.");for(var s=n.length;s--;){var h=t;h.nav=n[s];var a=new i(h)}}function i(t){t=gn.extend({nav:document.querySelector(".priority-nav"),button:"more",showAll:0,hideAll:0},t||{});var i=document.createDocumentFragment();this.nav=t.nav,this.nav.classList.add("js-priority-nav"),this.visibleContainer=this.nav.querySelector("ul"),this.visibleItems=this.visibleContainer.children,this.initialized=!1,this.init=function(){this.nav.querySelector("ul").classList.add("js-nav-visible"),gn.prepend(this.nav,'<button class="js-nav-toggle" data-count="">'+t.button+"</button>"),gn.append(this.nav,'<ul class="js-nav-hidden is-hidden"></ul>'),this.hiddenContainer=this.nav.querySelector(".js-nav-hidden"),this.hiddenItems=this.hiddenContainer.children,this.btn=this.nav.querySelector(".js-nav-toggle"),this.btnWidth=gn.getOuterWidth(this.btn);var i=this;this.btn.addEventListener("click",function(){i.hiddenContainer.classList.toggle("is-hidden")}),this.initialized=!0},this.distory=function(){this.nav.classList.remove("js-priority-nav"),this.visibleContainer.classList.remove("js-nav-visible"),this.hiddenContainer.remove(),this.btn.remove(),this.initialized=!1},this.getBreakpoints=function(){this.bp=[],this.bpV=[],this.bpH=[];for(var t=!1,i=this.visibleItems.length;i--;){t&&(this.visibleItems[i+1].style.display="none");var e=gn.getOuterWidth(this.visibleContainer)+1;this.bp.unshift(e),this.bpV.unshift(e),t=!0}for(var n=0,s=this.visibleItems.length;s>n;n++)this.visibleItems[n].style.display=""},this.getBreakpoints(),this.prependItemsToFragment=function(){return gn.prepend(i,this.visibleItems[this.bpV.length-1]),this.bpH.unshift(this.bpV[this.bpV.length-1]),this.bpV.splice(-1,1),i},this.appendItemsToFragment=function(){return gn.append(i,this.hiddenItems[0]),this.bpV.push(this.bpH[0]),this.bpH.shift(),i},this.updateNav=function(){if(this.windowWidth=window.innerWidth,this.outerWidth=gn.getOuterWidth(this.nav),this.outerWidth>=this.bp[this.bp.length-1]||this.windowWidth<t.showAll){if(this.initialized){if(this.bpH.length>0){for(;this.bpH.length>0;)this.appendItemsToFragment();this.visibleContainer.appendChild(i)}this.distory()}}else{if(this.initialized||this.init(),this.availableSpace=this.outerWidth-this.btnWidth,this.count,this.currentCount,0===t.hideAll||this.windowWidth>=t.hideAll)if(this.availableSpace<=this.bpV[this.bpV.length-1]){for(;this.availableSpace<=this.bpV[this.bpV.length-1];)this.prependItemsToFragment();this.hiddenContainer.insertBefore(i,this.hiddenContainer.firstChild)}else{for(this.hiddenItems=this.hiddenContainer.children;this.availableSpace>this.bpH[0];)this.appendItemsToFragment();this.visibleContainer.appendChild(i)}else{if(this.bpH.length===this.bp.length)return;for(;this.bpV.length>0;)this.prependItemsToFragment();this.hiddenContainer.insertBefore(i,this.hiddenContainer.firstChild)}this.currentCount=this.currentCount||0,this.count=this.bpH.length||0,this.count!==this.currentCount&&(this.currentCount=this.btn.getAttribute("data-count"),this.btn.setAttribute("data-count",this.count))}},this.updateNav();var e=this;gn.optimizedResize.add(function(){e.updateNav()})}return t});